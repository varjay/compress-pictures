!function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports.TinyPic=e():t.TinyPic=e()}(window,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";async function n(t,e,r){return new Promise(n=>{let i=new Image;i.onload=function(){let t=function(t,e){let r=t/e,n=1280,i=1280;if(t<1280&&e<1280)return{width:t,height:e};t>1280&&e>1280?r>2?n=(i=1280)*r:i=(n=1280)/r:r>2?(n=t,i=e):r<.5?(n=t,i=e):r>1?i=(n=1280)/r:n=(i=1280)*r;return n=Math.round(n),i=Math.round(i),{width:n,height:i}}(i.width,i.height),o=t.width,a=t.height,f=document.createElement("canvas"),u=f.getContext("2d");switch([5,6,7,8].indexOf(e)>-1?(f.width=a,f.height=o):(f.width=o,f.height=a),e){case 2:u.transform(-1,0,0,1,o,0);break;case 3:u.transform(-1,0,0,-1,o,a);break;case 4:u.transform(1,0,0,-1,0,a);break;case 5:u.transform(0,1,1,0,0,0);break;case 6:u.transform(0,1,-1,0,a,0);break;case 7:u.transform(0,-1,-1,0,a,o);break;case 8:u.transform(0,-1,1,0,0,o);break;default:u.transform(1,0,0,1,0,0)}[5,6,7,8].indexOf(e)>-1?u.drawImage(i,0,0,f.height,f.width):u.drawImage(i,0,0,f.width,f.height),n({img:f.toDataURL(r,.7),width:f.width,height:f.height})},i.src=t})}r.r(e),e.default=async function(t){let e=t.files[0],r=e.type,i=await async function(t){return new Promise(e=>{let r=new FileReader;r.onload=function(t){let r=new DataView(this.result);65496!=r.getUint16(0,!1)&&e({orientation:-2,arraybuffer:this.result});let n=r.byteLength,i=2;for(;i<n;){let t=r.getUint16(i,!1);if(i+=2,65505==t){1165519206!=r.getUint32(i+=2,!1)&&e({orientation:-1,arraybuffer:this.result});let t=18761==r.getUint16(i+=6,!1);i+=r.getUint32(i+4,t);let n=r.getUint16(i,t);i+=2;for(let o=0;o<n;o++)274==r.getUint16(i+12*o,t)&&e({orientation:r.getUint16(i+12*o+8,t),arraybuffer:this.result})}else{if(65280!=(65280&t))break;i+=r.getUint16(i,!1)}}e({orientation:-1,arraybuffer:this.result})},r.readAsArrayBuffer(t)})}(e),o=`data:${r};base64,`+function(t){let e="",r=new Uint8Array(t);for(let n=r.byteLength,i=0;i<n;i++)e+=String.fromCharCode(r[i]);return window.btoa(e)}(i.arraybuffer),a=await n(o,i.orientation,r),f=function(t){for(var e=t.split(","),r=e[0].match(/:(.*?);/)[1],n=atob(e[1]),i=n.length,o=new Uint8Array(i);i--;)o[i]=n.charCodeAt(i);return new Blob([o],{type:r})}(a.img);return{img:f,url:URL.createObjectURL(f),info:{width:a.width,height:a.height}}}}]).default});