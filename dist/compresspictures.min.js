!function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports.TinyPic=e():t.TinyPic=e()}(window,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";async function n(t,e,r,n){return new Promise(i=>{let o=new Image;o.onload=function(){let t,a,f=function(t,e){let r=t/e,n=1280,i=1280;if(t<1280&&e<1280)return{width:t,height:e};t>1280&&e>1280?r>2?n=(i=1280)*r:i=(n=1280)/r:r>2?(n=t,i=e):r<.5?(n=t,i=e):r>1?i=(n=1280)/r:n=(i=1280)*r;return n=Math.round(n),i=Math.round(i),{width:n,height:i}}(o.width,o.height),u=f.width,h=f.height;if(n){let e=function(t,e){let r=null;if(t.includes("square")){let t;if(r={},e.width>e.height)t=e.height,r.sx=-(e.width-e.height)/2,r.sy=0,r.width=e.height,r.height=e.height;else{if(!(e.height>e.width))return!1;r.sx=0,r.sy=-(e.height-e.width)/2,r.width=e.width,r.height=e.width}}return r}(n,f);e&&(t=e.sx,a=e.sy,u=e.width,h=e.height)}let l=document.createElement("canvas"),s=l.getContext("2d");switch([5,6,7,8].indexOf(e)>-1?(l.width=h,l.height=u):(l.width=u,l.height=h),e){case 2:s.transform(-1,0,0,1,u,0);break;case 3:s.transform(-1,0,0,-1,u,h);break;case 4:s.transform(1,0,0,-1,0,h);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,h,0);break;case 7:s.transform(0,-1,-1,0,h,u);break;case 8:s.transform(0,-1,1,0,0,u);break;default:s.transform(1,0,0,1,0,0)}s.drawImage(o,t,a,f.width,f.height),i({img:l.toDataURL(r,.7),width:l.width,height:l.height})},o.src=t})}r.r(e),e.default=async function(t,e){let r=t.files[0],i=r.type,o=await async function(t){return new Promise(e=>{let r=new FileReader;r.onload=function(t){let r=new DataView(this.result);65496!=r.getUint16(0,!1)&&e({orientation:-2,arraybuffer:this.result});let n=r.byteLength,i=2;for(;i<n;){let t=r.getUint16(i,!1);if(i+=2,65505==t){1165519206!=r.getUint32(i+=2,!1)&&e({orientation:-1,arraybuffer:this.result});let t=18761==r.getUint16(i+=6,!1);i+=r.getUint32(i+4,t);let n=r.getUint16(i,t);i+=2;for(let o=0;o<n;o++)274==r.getUint16(i+12*o,t)&&e({orientation:r.getUint16(i+12*o+8,t),arraybuffer:this.result})}else{if(65280!=(65280&t))break;i+=r.getUint16(i,!1)}}e({orientation:-1,arraybuffer:this.result})},r.readAsArrayBuffer(t)})}(r),a=`data:${i};base64,`+function(t){let e="",r=new Uint8Array(t);for(let n=r.byteLength,i=0;i<n;i++)e+=String.fromCharCode(r[i]);return window.btoa(e)}(o.arraybuffer),f=await n(a,o.orientation,i,e),u=function(t){for(var e=t.split(","),r=e[0].match(/:(.*?);/)[1],n=atob(e[1]),i=n.length,o=new Uint8Array(i);i--;)o[i]=n.charCodeAt(i);return new Blob([o],{type:r})}(f.img);return{img:u,url:URL.createObjectURL(u),info:{width:f.width,height:f.height}}}}]).default});